"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6704],{6704:(G,Z,u)=>{u.r(Z),u.d(Z,{AuthModule:()=>j});var p=u(9808),g=u(5056),d=u(6852),b=u(655),o=u(4182),e=u(6435),U=u(6485),m=u(4159),h=u(4023);function C(t,i){1&t&&(e.TgZ(0,"span",11),e._uU(1," El "),e.TgZ(2,"strong"),e._uU(3,"correo"),e.qZA(),e._uU(4," es requerido "),e.qZA())}function w(t,i){1&t&&(e.TgZ(0,"span",11),e._uU(1," El "),e.TgZ(2,"strong"),e._uU(3,"correo"),e.qZA(),e._uU(4," es invalido "),e.qZA())}function y(t,i){1&t&&(e.TgZ(0,"span",11),e._uU(1," La "),e.TgZ(2,"strong"),e._uU(3,"Contase\xf1a"),e.qZA(),e._uU(4," es requerida "),e.qZA())}const A=function(){return{"text-transform":"capitalize"}},v=function(){return{"text-transform":"lowercase"}};let q=(()=>{class t{constructor(r,n,a,s,l,c){this.nav=r,this.fb=n,this.firebaseError=a,this.authService=s,this.loading=l,this.toast=c,this.loginUser=this.fb.group({email:["",[o.kI.required,o.kI.email]],password:["",o.kI.required]})}ngOnInit(){}login(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.loading.create({message:"cargando...",spinner:"bubbles",cssClass:"success"})).present(),this.authService.loginWithEmailAndPassword(this.loginUser.value.email,this.loginUser.value.password).then(s=>{var l;null!==(l=s.user)&&void 0!==l&&l.emailVerified?(this.loading.dismiss(),this.nav.navigateForward("/layout")):(this.loading.dismiss(),this.toast.presentToast("A\xfan no est\xe1s verificado, checa tu correo! \u{1f625}","warning",4e3),this.nav.navigateForward("/verificar"))}).catch(s=>{this.loading.dismiss()})})}goRegistro(){this.nav.navigateForward("/auth/register",{animated:!1})}goForgot(){this.nav.navigateForward("/auth/recuperar",{animated:!1})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(g.SH),e.Y36(o.qu),e.Y36(U.X),e.Y36(m.e),e.Y36(g.HT),e.Y36(h.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:26,vars:11,consts:[[1,"wrapper"],[1,"body"],["src","/assets/img/usuario.png","alt","login",1,"logo"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","formControlName","email","placeholder","matricula@utcancun.edu.mx",1,"form-control"],[2,"color","black"],["class","text-danger errorLabel",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],["expand","block","type","submit",3,"ngStyle","disabled"],["expand","block",3,"ngStyle","click"],[1,"text-danger","errorLabel"]],template:function(r,n){if(1&r&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),e._UZ(3,"img",2),e.TgZ(4,"h1"),e._uU(5,"Herramientas UT "),e._UZ(6,"br"),e._uU(7," Login"),e.qZA(),e.TgZ(8,"form",3),e.NdJ("ngSubmit",function(){return n.login()}),e.TgZ(9,"div",4),e._UZ(10,"input",5),e.TgZ(11,"label",6),e._uU(12,"Correo Electronico"),e.qZA(),e.YNc(13,C,5,0,"span",7),e.YNc(14,w,5,0,"span",7),e.qZA(),e.TgZ(15,"div",4),e._UZ(16,"input",8),e.TgZ(17,"label",6),e._uU(18,"Password"),e.qZA(),e.YNc(19,y,5,0,"span",7),e.qZA(),e.TgZ(20,"ion-button",9),e._uU(21,"Ingresar"),e.qZA(),e.TgZ(22,"ion-button",10),e.NdJ("click",function(){return n.goRegistro()}),e._uU(23," No tienes cuenta? Registrate \u{1f60d} "),e.qZA(),e.TgZ(24,"ion-button",10),e.NdJ("click",function(){return n.goForgot()}),e._uU(25," Se te olvido tu contrasena? Recuperala \u{1f618} "),e.qZA()()()()()),2&r){let a,s,l;e.xp6(8),e.Q6J("formGroup",n.loginUser),e.xp6(5),e.Q6J("ngIf",(null==(a=n.loginUser.get("email"))?null:a.hasError("required"))&&(null==(a=n.loginUser.get("email"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",(null==(s=n.loginUser.get("email"))?null:s.hasError("email"))&&(null==(s=n.loginUser.get("email"))?null:s.touched)),e.xp6(5),e.Q6J("ngIf",(null==(l=n.loginUser.get("password"))?null:l.hasError("required"))&&(null==(l=n.loginUser.get("password"))?null:l.touched)),e.xp6(1),e.Q6J("ngStyle",e.DdM(8,A))("disabled",n.loginUser.invalid),e.xp6(2),e.Q6J("ngStyle",e.DdM(9,v)),e.xp6(2),e.Q6J("ngStyle",e.DdM(10,v))}},dependencies:[g.YG,g.W2,p.O5,p.PC,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".wrapper[_ngcontent-%COMP%]{background:url(https://i.imgur.com/sWRPpxO.jpg);height:100%;color:azure;display:flex;align-items:center;justify-content:center}.logo[_ngcontent-%COMP%]{height:130px;margin-bottom:10px}.body[_ngcontent-%COMP%]{width:100%;max-width:430px;padding:15px;text-align:center}ion-button[_ngcontent-%COMP%]{margin-top:20px}"]}),t})();class Y{}var T=u(7845),x=u(4941);function k(t,i){1&t&&(e.TgZ(0,"span",16),e._uU(1," El "),e.TgZ(2,"strong"),e._uU(3,"correo"),e.qZA(),e._uU(4," es requerido "),e.qZA())}function J(t,i){1&t&&(e.TgZ(0,"span",16),e._uU(1," El "),e.TgZ(2,"strong"),e._uU(3,"correo"),e.qZA(),e._uU(4," es invalido "),e.qZA())}function R(t,i){1&t&&(e.TgZ(0,"span",16),e._uU(1," La "),e.TgZ(2,"strong"),e._uU(3,"Contase\xf1a"),e.qZA(),e._uU(4," es requerida "),e.qZA())}function I(t,i){1&t&&(e.TgZ(0,"span",16),e._uU(1," La "),e.TgZ(2,"strong"),e._uU(3,"Contase\xf1a"),e.qZA(),e._uU(4," debe tener 6 caracteres "),e.qZA())}const L=function(){return{"text-transform":"lowercase"}};function P(t,i){1&t&&(e.TgZ(0,"span",12),e._uU(1," El "),e.TgZ(2,"strong"),e._uU(3,"correo"),e.qZA(),e._uU(4," es requerido "),e.qZA())}function N(t,i){1&t&&(e.TgZ(0,"span",12),e._uU(1," El "),e.TgZ(2,"strong"),e._uU(3,"correo"),e.qZA(),e._uU(4," es invalido "),e.qZA())}const E=function(){return{"text-transform":"lowercase"}};function D(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"div",2),e._UZ(1,"img",3),e.TgZ(2,"h1"),e._uU(3,"Recuperar"),e.qZA(),e.TgZ(4,"form",4),e.NdJ("ngSubmit",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.recuperar())}),e.TgZ(5,"div",5),e._UZ(6,"input",6),e.TgZ(7,"label",7),e._uU(8,"Correo Electronico"),e.qZA(),e.YNc(9,P,5,0,"span",8),e.YNc(10,N,5,0,"span",8),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e._uU(13,"Recuperar"),e.qZA()(),e.TgZ(14,"ion-button",11),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.goLogin())}),e._uU(15," Logueate \u{1f60e} "),e.qZA()()()}if(2&t){const r=e.oxw();let n,a;e.xp6(4),e.Q6J("formGroup",r.recuperarUsuario),e.xp6(5),e.Q6J("ngIf",(null==(n=r.recuperarUsuario.get("email"))?null:n.hasError("required"))&&(null==(n=r.recuperarUsuario.get("email"))?null:n.touched)),e.xp6(1),e.Q6J("ngIf",(null==(a=r.recuperarUsuario.get("email"))?null:a.hasError("email"))&&(null==(a=r.recuperarUsuario.get("email"))?null:a.touched)),e.xp6(2),e.Q6J("disabled",r.recuperarUsuario.invalid),e.xp6(2),e.Q6J("ngStyle",e.DdM(5,E))}}function O(t,i){if(1&t&&(e.TgZ(0,"p",13),e._uU(1),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.hij("Hola: ",r.user.email," ")}}const F=[{path:"",children:[{path:"login",component:q},{path:"register",component:(()=>{class t{constructor(r,n,a,s,l,c,f,_){this.fb=r,this.router=n,this.toast=a,this.loading=s,this.uService=l,this.nav=c,this.auth=f,this.autF=_,this.usuario=new Y,this.registerUser=this.fb.group({name:["",o.kI.required],lastName:["",[o.kI.required,o.kI.minLength(4),o.kI.maxLength(100)]],email:["",[o.kI.required,o.kI.email]],matricula:["",[o.kI.required]],password:["",[o.kI.required,o.kI.minLength(6)]],repetirpassword:["",o.kI.required]})}ngOnInit(){}registrar(){return(0,b.mG)(this,void 0,void 0,function*(){yield(yield this.loading.create({message:"cargando...",spinner:"bubbles",cssClass:"primary"})).present();const n=this.registerUser.value.name,a=this.registerUser.value.lastName,s=this.registerUser.value.email,l=this.registerUser.value.matricula,c=this.registerUser.value.password;if(c!==this.registerUser.value.repetirpassword)return this.loading.dismiss(),void this.toast.presentToast("Las contrase\xf1as no son iguales \u{1f612}","danger",4e3);this.auth.registrarse(s,c).then(()=>{this.loading.dismiss(),this.usuario.nombre=n,this.usuario.apellido=a,this.usuario.correo=s,this.usuario.matricula=l,this.usuario.idRolUsuario=3,this.uService.addUser(this.usuario).subscribe(()=>{this.verificarCoreo()})}).catch(_=>{this.loading.dismiss(),this.toast.presentToast("Hubo un errorsito desconocido: "+_,"danger",4e3)})})}verificarCoreo(){this.autF.currentUser.then(r=>null==r?void 0:r.sendEmailVerification()).then(()=>{this.toast.presentToast("Usuario registrado con exito \u{1f60d}","success",4e3),this.toast.presentToast("Te enviamos un correo para verificar tu correo electronico \u{1f607}","warning",4e3),this.router.navigate(["/login"])})}goLogin(){this.nav.navigateBack("/auth/login",{animated:!1})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(o.qu),e.Y36(d.F0),e.Y36(h.k),e.Y36(g.HT),e.Y36(T.K),e.Y36(g.SH),e.Y36(m.e),e.Y36(x.zQ))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:42,vars:8,consts:[[1,"wrapper"],[1,"body"],["src","/assets/img/usuario.png","alt","login",1,"logo"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","text","formControlName","name","placeholder","name",1,"form-control"],[2,"color","black"],["type","text","formControlName","lastName","placeholder","lastname",1,"form-control"],["type","text","formControlName","matricula","placeholder","matricula",1,"form-control"],["type","email","formControlName","email","placeholder","matricula@utcancun.edu.mx",1,"form-control"],["class","text-danger errorLabel",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],["type","password","formControlName","repetirpassword","placeholder","Repetir Password",1,"form-control"],[1,"d-grid","gap-2","mb-3"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["expand","block",3,"ngStyle","click"],[1,"text-danger","errorLabel"]],template:function(r,n){if(1&r&&(e.TgZ(0,"ion-content")(1,"div",0)(2,"div",1),e._UZ(3,"img",2),e.TgZ(4,"h1"),e._uU(5,"Herramientas UT "),e._UZ(6,"br"),e._uU(7," Registrate Ya!"),e.qZA(),e.TgZ(8,"form",3),e.NdJ("ngSubmit",function(){return n.registrar()}),e.TgZ(9,"div",4),e._UZ(10,"input",5),e.TgZ(11,"label",6),e._uU(12,"Nombre Completo"),e.qZA()(),e.TgZ(13,"div",4),e._UZ(14,"input",7),e.TgZ(15,"label",6),e._uU(16,"Apellidos"),e.qZA()(),e.TgZ(17,"div",4),e._UZ(18,"input",8),e.TgZ(19,"label",6),e._uU(20,"Matr\xedcula"),e.qZA()(),e.TgZ(21,"div",4),e._UZ(22,"input",9),e.TgZ(23,"label",6),e._uU(24,"Correo Electronico"),e.qZA(),e.YNc(25,k,5,0,"span",10),e.YNc(26,J,5,0,"span",10),e.qZA(),e.TgZ(27,"div",4),e._UZ(28,"input",11),e.TgZ(29,"label",6),e._uU(30,"Password"),e.qZA(),e.YNc(31,R,5,0,"span",10),e.YNc(32,I,5,0,"span",10),e.qZA(),e.TgZ(33,"div",4),e._UZ(34,"input",12),e.TgZ(35,"label",6),e._uU(36,"Repetir Password"),e.qZA()(),e.TgZ(37,"div",13)(38,"button",14),e._uU(39,"Registrar"),e.qZA()(),e.TgZ(40,"ion-button",15),e.NdJ("click",function(){return n.goLogin()}),e._uU(41," Ya tienes cuenta? Logueate \u{1f60e} "),e.qZA()()()()()),2&r){let a,s,l,c;e.xp6(8),e.Q6J("formGroup",n.registerUser),e.xp6(17),e.Q6J("ngIf",(null==(a=n.registerUser.get("email"))?null:a.hasError("required"))&&(null==(a=n.registerUser.get("email"))?null:a.touched)),e.xp6(1),e.Q6J("ngIf",(null==(s=n.registerUser.get("email"))?null:s.hasError("email"))&&(null==(s=n.registerUser.get("email"))?null:s.touched)),e.xp6(5),e.Q6J("ngIf",(null==(l=n.registerUser.get("password"))?null:l.hasError("required"))&&(null==(l=n.registerUser.get("password"))?null:l.touched)),e.xp6(1),e.Q6J("ngIf",(null==(c=n.registerUser.get("password"))?null:c.hasError("minlength"))&&(null==(c=n.registerUser.get("password"))?null:c.touched)),e.xp6(6),e.Q6J("disabled",n.registerUser.invalid),e.xp6(2),e.Q6J("ngStyle",e.DdM(7,L))}},dependencies:[g.YG,g.W2,p.O5,p.PC,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".wrapper[_ngcontent-%COMP%]{background:url(https://i.imgur.com/sWRPpxO.jpg);background-repeat:repeat;color:azure;display:flex;align-items:center;justify-content:center}.logo[_ngcontent-%COMP%]{height:130px;margin-bottom:10px}.body[_ngcontent-%COMP%]{width:100%;max-width:430px;padding:15px;text-align:center}"]}),t})()},{path:"recuperar",component:(()=>{class t{constructor(r,n,a,s,l,c){this.fb=r,this.afAuth=n,this.router=a,this.firebaseError=s,this.toast=l,this.nav=c,this.loading=!1,this.recuperarUsuario=this.fb.group({email:["",[o.kI.required,o.kI.email]]})}ngOnInit(){}recuperar(){this.afAuth.sendPasswordResetEmail(this.recuperarUsuario.value.email).then(()=>{this.toast.presentToast("Correo enviado con exito para recuperar password","success",4e3),this.router.navigate(["/login"]),this.loading=!0}).catch(n=>{this.loading=!0})}goLogin(){this.nav.navigateBack("/auth/login",{animated:!1})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(o.qu),e.Y36(x.zQ),e.Y36(d.F0),e.Y36(U.X),e.Y36(h.k),e.Y36(g.SH))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recuperar-password"]],decls:2,vars:1,consts:[[1,"wrapper"],["class","body",4,"ngIf"],[1,"body"],["src","/assets/img/usuario.png","alt","login",1,"logo"],[3,"formGroup","ngSubmit"],[1,"form-floating","mb-3"],["type","email","formControlName","email","placeholder","matricula@utcancun.edu.mx",1,"form-control"],[2,"color","black"],["class","text-danger errorLabel",4,"ngIf"],[1,"d-grid","gap-2","mb-3"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["expand","block",3,"ngStyle","click"],[1,"text-danger","errorLabel"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0),e.YNc(1,D,16,6,"div",1),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngIf",!n.loading))},dependencies:[g.YG,p.O5,p.PC,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:[".wrapper[_ngcontent-%COMP%]{background:url(https://i.imgur.com/sWRPpxO.jpg);height:100%;color:azure;display:flex;align-items:center;justify-content:center}.logo[_ngcontent-%COMP%]{height:130px;margin-bottom:10px}.body[_ngcontent-%COMP%]{width:100%;max-width:430px;padding:15px;text-align:center}"]}),t})()},{path:"dash",component:(()=>{class t{constructor(r,n,a){this.nav=r,this.authService=n,this.userService=a}ngOnInit(){this.authService.getUserLogged().subscribe(r=>{this.user=r,this.userService.getUserByEmail(this.user.email).subscribe(n=>{this.apiUser=n})})}logOut(){this.authService.logout().then(()=>this.nav.navigateBack(["/login"]))}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(g.SH),e.Y36(m.e),e.Y36(T.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard"]],decls:15,vars:1,consts:[[1,"container"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-lg-start"],["href","#",1,"d-flex","align-items-center","mb-2","mb-lg-0","text-white","text-decoration-none"],["width","40","height","32","role","img","aria-label","Bootstrap",1,"bi","me-2"],[0,"xlink","href","#bootstrap"],[1,"nav","col-12","col-lg-auto","me-lg-auto","mb-2","justify-content-center","mb-md-0"],["role","search",1,"col-12","col-lg-auto","mb-3","mb-lg-0","me-lg-3"],["type","search","placeholder","Search...","aria-label","Search",1,"form-control","form-control-dark","text-bg-dark"],[1,"text-end"],["type","button",1,"btn","btn-warning",3,"click"],[1,"pricing-header","p-3","pb-md-4","mx-auto","text-center"],[1,"display-4","fw-normal"],["class","fs-5 text-muted",4,"ngIf"],[1,"fs-5","text-muted"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"header",1)(2,"a",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"use",4),e.qZA()(),e.kcU(),e._UZ(5,"ul",5),e.TgZ(6,"form",6),e._UZ(7,"input",7),e.qZA(),e.TgZ(8,"div",8)(9,"button",9),e.NdJ("click",function(){return n.logOut()}),e._uU(10,"LogOut"),e.qZA()()(),e.TgZ(11,"div",10)(12,"h1",11),e._uU(13,"Bienvenido"),e.qZA(),e.YNc(14,O,2,1,"p",12),e.qZA()()),2&r&&(e.xp6(14),e.Q6J("ngIf",n.user))},dependencies:[p.O5,o._Y,o.JL],styles:[".container[_ngcontent-%COMP%]{padding-top:20px}"]}),t})()},{path:"**",redirectTo:"login"}]}];let Q=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(F)]}),t})(),j=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Pc,p.ez,o.UX,Q,d.Bz]}),t})()}}]);